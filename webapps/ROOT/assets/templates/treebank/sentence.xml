<?xml version="1.0" encoding="UTF-8"?>
<kiln:root xmlns:tei="http://www.tei-c.org/ns/1.0"
           xmlns:xi="http://www.w3.org/2001/XInclude"
           xmlns:kiln="http://www.kcl.ac.uk/artshums/depts/ddh/kiln/ns/1.0"
           xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:import href="cocoon://_internal/template/xsl/stylesheets/treebank/display-sentence.xsl" />

  <kiln:parent>
    <xi:include href="base.xml" />
  </kiln:parent>

  <kiln:child>

    <kiln:block name="title">
      <kiln:super />
      <xsl:text>Sentence </xsl:text>
      <xsl:value-of select="aggregation/treebank/sentences/sentence/@id" />
      <xsl:text> for text </xsl:text>
      <xsl:value-of select="aggregation/treebank/@text"/>
      <xsl:text> in corpus </xsl:text>
      <xsl:value-of select="aggregation/treebank/@corpus"/>
    </kiln:block>

    <kiln:block name="js">
      <kiln:super />
      <script src="https://www.gstatic.com/charts/loader.js"></script>
      <script charset="UTF-8">
        google.charts.load('current', {packages: ["orgchart"]});
        google.charts.setOnLoadCallback(drawChart);
        function drawChart() {
          var data = new google.visualization.arrayToDataTable(<xsl:value-of select="aggregation/treebank/chart_data" />, true);
          var chart = new google.visualization.OrgChart(
            document.getElementById('sentence-chart'));
          chart.draw(data, {allowHtml: true});
        }
      </script>
    </kiln:block>

    <kiln:block name="page-heading">
      <kiln:super />
      <xsl:text>Sentence </xsl:text>
      <xsl:value-of select="aggregation/treebank/sentences/sentence/@id" />
      <xsl:text> for text </xsl:text>
      <xsl:value-of select="aggregation/treebank/@text"/>
      <xsl:text> in corpus </xsl:text>
      <xsl:value-of select="aggregation/treebank/@corpus"/>
    </kiln:block>

    <kiln:block name="content">
      <xsl:apply-templates select="aggregation/treebank" />
    </kiln:block>

  </kiln:child>

</kiln:root>
